# Deploy Apps

## Task 1 - Inspect your cluster

Inspect your cluster , current context and pods.

```
kubectl cluster-info                      # info about running kubernetes cluster
kubectl config get-clusters               # list all the cluster available
kubectl config get-contexts               # get all the contexts and the running one
kubectl get nodes -o wide                 # note the Container-Runtime engine
kubectl get pods                          # no pods on default namespace
kubectl get pods --namespace kube-system  # system pod running kubernetes
kubectl get pods --namespace kube-system -o wide  # additional information
kubectl get all                                   # In addition to pods, we see services, daemonsets, deployments and replicasets
kubectl get all --all-namespaces                  # all system services
```

Deploying resources imperatively in your cluster

```
# Creates a Deployment with 5 replicas in it.
# Pulled from Google's container registry
kubectl create deployment hello-world --image=gcr.io/google-samples/hello-app:1.0 --replicas=5 

# Deploy a single "bare" pod that's not managed by a controller.
kubectl run hello-world-pod --image=gcr.io/google-samples/hello-app:1.0

# Some details
kubectl get deployment -o wide
kubectl get pods -o wide
kubectl describe pod hello-world-xxxxxxx-xxxxx  # note "Controlled by","Containers","Events"
```

Container Runtime

```
#Only works with standard kubernetes installation (not kind)
#When containerd is your container runtime, use crictl to get a listing of the containers running
#Check out this for more details https://kubernetes.io/docs/tasks/debug-application-cluster/crictl
sudo crictl --runtime-endpoint unix:///run/containerd/containerd.sock ps

#Only works with standard kubernetes installation (not kind)
#When docker is your container runtime, use docker to get a listing of the containers running
sudo docker ps

#kind runs a local Kubernetes cluster by using Docker containers as "nodes",with ctr and crictl tools available
#The nodes currently run containerd as the node runtime, with ctr and crictl tools available
kubectl get no

docker exec -ti kind-control-plane bash
crictl images
exit

docker exec kind-control-plane crictl ps
docker exec kind-control-plane crictl images

docker exec -it $(kind get clusters | head -1)-control-plane crictl images
docker exec -it kind-control-plane crictl images
```


