# Azure File Share

## Task 1 - NFS export

- [Azure File Share](https://learn.microsoft.com/en-us/azure/storage/files/storage-files-quick-create-use-linux)


```
az login

rg-storage="RG-myaks-storage"
region="westeurope"
storageAccountName="aksmyst$RANDOM"
shareName="export"

az group create \
    --name $rg-storage \
    --location $region \
    --output none
    
az storage account create \
    --resource-group $rg-storage \
    --name $storageAccountName \
    --location $region \
    --kind FileStorage \
    --sku Premium_LRS \
    --enable-large-file-share \
    --output none
    
az storage share-rm create \
    --resource-group $rg-storage \
    --storage-account $storageAccountName \
    --name $shareName \
    --quota 1024 \
    --enabled-protocols NFS \
    --output none
    
az storage account update -g $rg-storage -n $storageAccountName --https-only false
```
 
 
```

```
 
 # Task 2 - Private Endpoint
 
 - Enter the storage account and select File Shares
 - Select "Export" file share and then "Configure Netwrok Security -- > Setup a private endpoint"
 - Add Private Endpoint : RG = "RG-aksmyst" , Name="aksmystep" , Region=westeurope"
 - Resource="file"
 - Virtual Network="MC_RG-myAKS_myAKSCluster_westeurope", subnet ="aks_subnet", Dynamic IP
 - Integrate with private DNS zone="Yes"
 
 # Task 3 - Secure Transfer Disable
 
 - Storage Account --> File Shares -> Export -> Secure transfer setting="Disable"
