# Restart Policy

## Task 1 - Always Restart

The policy restart the POD even if it exit succesfully with ReturnCode=0

- [AlwaysRestartPod.yaml](https://github.com/YeffaDev/learn-kubernetes-brownbag/blob/master/lab/yaml/06.service.yaml)

```
vi AlwaysRestartPod.yaml
kubectl get po --watch &
kubectl apply -f AlwaysRestartPod.yaml      # The POD stay live for 5 sec, then exit succesfully
fg
ctrl+c
kubectl describe pod demopod1 | grep Exit
kubectl delete -f AlwaysRestartPod.yaml --force --grace-period=0
```

## Task 2 - Always Restart

The policy restart the POD when it fails (exit code=1)

- [OnFailureRestartPolicy.yaml](https://github.com/YeffaDev/learn-kubernetes-brownbag/blob/master/lab/yaml/06.OnFailureRestartPolicy.yaml)

```
vi OnFailureRestartPolicy.yaml
kubectl get po --watch &
kubectl apply -f OnFailureRestartPolicy.yaml        # The POD stay live for 5 sec, then it fails
fg
ctrl+c
kubectl describe pod demopod2 | grep Exit
kubectl delete -f OnFailureRestartPolicy.yaml --force --grace-period=0
```
